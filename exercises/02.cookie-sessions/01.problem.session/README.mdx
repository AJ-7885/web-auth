# Session Storage

üë®‚Äçüíº We're not talking about `window.sessionStorage` here. We're talking about
storing information about the current session. For our authentication process,
all we really need is a way to store the `userId`, so we'll just use a cookie
for that. So we'll use Remix's
[`createCookieSessionStorage` API](https://remix.run/docs/en/main/utils/sessions#createcookiesessionstorage)
to create a session storage object that we can use to store and retrieve the
`userId`.

üê® Please <InlineFile file="app/utils/session.server.ts">Create `app/utils/session.server.ts`</InlineFile>
to initialize this session storage object.

üê® Configure the cookie option with the following properties:

- `name`: `'_session'` - this is the name of the cookie that will be created and
  should be unique relative to other cookies on your domain.
- `sameSite`: `'lax'` - The cookie is sent with "safe" HTTP methods (like
  `GET`), and only when the request originates from the same site or when the
  user navigates to the URL from an external site, such as by following a link.
  This is a balance between security and usability, preventing the cookie from
  being sent with cross-site POST requests (which are often used in
  [cross-site request forgery attacks](https://owasp.org/www-community/attacks/csrf)),
  but still allowing the user to access content via regular navigation.
- `path`: `'/'` - The cookie is sent for all requests on the domain.
- `httpOnly`: `true` - The cookie is not accessible via JavaScript. This is
  important for security because it prevents cross-site scripting attacks from
  accessing the cookie.
- `secrets`: `[process.env.SESSION_SECRET]` - This is an array of secrets that
  will be used to sign the cookie. This is important for security because it
  prevents the cookie from being tampered with.
- `secure`: `process.env.NODE_ENV === 'production'` - The cookie is only sent
  over HTTPS. This is important for security because it prevents the cookie from
  being sent over an insecure connection. We only want to do this in production
  because while some browsers are fine ignoring this on `localhost`, Safari does
  not.

With that, you can add this to export all the bits of the sessionStorage so we
can use them throughout the app:

```ts filename=app/utils/session.server.ts start=14
export const { getSession, commitSession, destroySession } = sessionStorage
```

You may have noticed that we are using an environment variable for the secret.
So you'll need to add that to the <InlineFile file=".env" /> file.

Because this is local, you can set it to any value you like. However, in
production, you'll want to set this to a long, random string. You can use a tool
like [1Password](https://1password.com/password-generator/) to generate a random
string.

Once you have that set, you can update <InlineFile file="app/utils/env.server.ts" />
so you have type-safe access to that environment variable.

There's not a great way to test that you've got this done correctly until the
next step, so you <Link to="?preview=diff">may check the diff</Link> to
make sure you got it right before moving on.

- [üìú Remix's `createCookieSessionStorage` API](https://remix.run/docs/en/main/utils/sessions#createcookiesessionstorage)
